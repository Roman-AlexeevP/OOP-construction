### Модули
- Работа с ДБ
    1. При отсутствии базы данных проинициализировать при первом запуске
    2. Присвоить ему уникальный айди и создать запись в табличке пользователей(Users)
    3. При работе с матрицей задач записывать все изменения в базу и выдавать для отображения: получить все задачи, добавить новую, удалить, отредактировать в таблице Tasks
    4. При работе со статистикой получить кол-во задач, их время на текущий момент
    5. При работе с игровым модулем сохранять кол-во опыта персонажа в таблице GameHero
    6. При работе с режимом фокусировки обновлять значения времени для задачи в таблице Tasks

- GUI
    - Получать и передавать данные из/в бизнес-логику
    - Отображать интерфейс
	
- Статистика
  - Получить данные из БД
  - Преобразовать если требуется
  - Передать в GUI(окно, с отображением статистики)(каждой диаграмме)
	 
- Логика работы задач и отображения
    - Отображать конкретное кол-во задач
    - Задавать ограничения на кол-во создаваемых задач
    - Сортировать по определенным данным
    - Работать в связке с БД

- Игровой модуль
    - Иметь доступ к изображениям игрового персонажа
    - Отображать данные из БД по игровому персонажу
    - Отображать картинку и мысль в зависимости от уровня персонажа
    - Получать текущее кол-во отработанных часов и конвертировать в игровой опыт, в зависимости от этого менять уровень и записывать в БД

Основной принцип GUI - реагирования **Slots** на **Signals**.

Основные события системы:
- Закрытия окна приложения - завершение программы
- Переключение вкладки - см. каждую вкладку отдельно

### События по вкладкам

##### Статистика
- **Открытие вкладки**: 
	- запрос данных из БД по количеству выполненных задач и текущих,
	- отрисовка круговой диаграммы по этим данным, 
	- установка переключателя на "по количеству задач" по умолчанию
- **Нажатие переключателя "по времени задач"**:
	- запрос данных по времени текущих и выполненных задач
	- перерисовка диаграмм,
	- установка переключателя на значение "по времени задач"
- **Нажатие переключателя "по количеству задач"**:
	- запрос данных по кол-ву текущих и выполненных задач
	- перерисовка диаграмм
	- установка переключателя на значение "по количеству задач"

#### Персонаж
- открытие вкладки: 
	- запрос в таблицу GameHero для получения текущего опыта
	- Получения из файлов проекта изображения, подходящего под текущий уровень персонажа
	- Получение из файлов игры записи мыслей персонажа, подходящих под текущий уровень героя
	- Отрисовка изображения персонажа, прогресс-бара опыта и виджета с текстом мыслей персонажа

#### Планирование

- Открытие вкладки:
	- Запрос  таблицу Tasks для получения списков задач
	- Фильтрация и сортировка задач по 4 группам
	- Отрисовка 4 секторов задач по матрице 
	- Отрисовка для каждого сектора кнопки "создать задачу"
	- Отрисовка для каждой задачи названия, длительности и кнопок "редактировать задачу", "удалить задачу"
- Нажатие кнопки "создать задачу"
	- Валидация кол-ва задач в секторе, если больше заданного числа, то отображения виджета с ошибкой создания
	- Если валидация успешна, то отображения отдельного виджета с формой по созданию задачи
	- После успешного создания задачи  - добавление задачи в сектор и запись в БД
- Нажатие кнопки "редактировать задачу"
	- Открытие виджета с формой задачи
	- После успешного редактирование - изменение данных по задаче в секторе и запись в БД
- Нажатие кнопки "удалить задачу"
	- Удаление задачи из БД
	- удаление задачи из сектора

#### Задачи

- Открытие вкладки
	- запрос в БД для получение списка самых важных задач
	- Отрисовка таблицы с задачами
	- Отрисовка формы для настройки режима фокусировки(периода работы, отдыха и кол-ва спринтов)
- Изменение настроек режима фокусировки
	- Изменение числового значения в виджете настройки
- Нажатие кнопки "начать"
	- Смена окна на вкладку с таймером
	- Отображение данных по времени задачи и кол-ву спринтов
	- Запись в БД, что задача активна в текущий момент
	
#### Окно таймера 
- Нажатие кнопки "Старт"
	- Начинается подсчет времени фокусировки
	- Виджет с таймером обновляется каждую секунду для отображения оставшегося времени
	- Если времени для работы над задачей не осталось, то кнопка становится неактивна
- Нажатие кнопки "Стоп"
	- Перерасчитывается оставшееся время на задачу
	- ПОтраченное время конвертируется и записывается БД
	- Отправляется сообщение в игровой модуль для перерасчета опыта
	- Виджет таймера перестает обновляться и останавливается на текущем времени
- Нажатие кнопки "Завершить задачу"
	- Если в задаче не осталось времени для работы, то данная кнопка становится активной
	- Задача в БД получает статус закрытой
	- Отправляется сообщение для игрового модуля для перерасчета опыта
	- Открывается вкладка "задачи" с обновленным списком задач без текущей